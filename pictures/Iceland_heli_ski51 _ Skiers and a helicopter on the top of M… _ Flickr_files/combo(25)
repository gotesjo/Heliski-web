YUI.add("hermes-template-search-subnav",(function(l,n){var t=l.Template.Handlebars.revive({1:function(l,n,t,e,a){var o,i,s=null!=n?n:l.nullContext||{},r=l.hooks.helperMissing,c="function",u=l.escapeExpression,d=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t<li class="link'+(null!=(o=d(t,"if").call(s,null!=n?d(n,"selected"):n,{name:"if",hash:{},fn:l.program(2,a,0),inverse:l.noop,data:a,loc:{start:{line:7,column:19},end:{line:7,column:51}}}))?o:"")+'" data-id="'+u(typeof(i=null!=(i=d(t,"id")||(null!=n?d(n,"id"):n))?i:r)===c?i.call(s,{name:"id",hash:{},data:a,loc:{start:{line:7,column:62},end:{line:7,column:68}}}):i)+'">\n\t\t\t\t\t'+(null!=(o=d(t,"if").call(s,null!=n?d(n,"url"):n,{name:"if",hash:{},fn:l.program(4,a,0),inverse:l.noop,data:a,loc:{start:{line:8,column:5},end:{line:8,column:41}}}))?o:"")+'\n\t\t\t\t\t\t<div class="title">'+u(typeof(i=null!=(i=d(t,"title")||(null!=n?d(n,"title"):n))?i:r)===c?i.call(s,{name:"title",hash:{},data:a,loc:{start:{line:9,column:25},end:{line:9,column:34}}}):i)+"</div>\n"+(null!=(o=d(t,"if").call(s,null!=n?d(n,"subtitle"):n,{name:"if",hash:{},fn:l.program(6,a,0),inverse:l.noop,data:a,loc:{start:{line:10,column:6},end:{line:12,column:13}}}))?o:"")+"\t\t\t\t\t"+(null!=(o=d(t,"if").call(s,null!=n?d(n,"url"):n,{name:"if",hash:{},fn:l.program(8,a,0),inverse:l.noop,data:a,loc:{start:{line:16,column:5},end:{line:16,column:27}}}))?o:"")+"\n\t\t\t\t</li>\n"},2:function(l,n,t,e,a){return" selected"},4:function(l,n,t,e,a){var o,i=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<a href="'+l.escapeExpression("function"==typeof(o=null!=(o=i(t,"url")||(null!=n?i(n,"url"):n))?o:l.hooks.helperMissing)?o.call(null!=n?n:l.nullContext||{},{name:"url",hash:{},data:a,loc:{start:{line:8,column:25},end:{line:8,column:32}}}):o)+'">'},6:function(l,n,t,e,a){var o,i=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t\t\t<div class="subtitle">'+l.escapeExpression("function"==typeof(o=null!=(o=i(t,"subtitle")||(null!=n?i(n,"subtitle"):n))?o:l.hooks.helperMissing)?o.call(null!=n?n:l.nullContext||{},{name:"subtitle",hash:{},data:a,loc:{start:{line:11,column:28},end:{line:11,column:40}}}):o)+"</div>\n"},8:function(l,n,t,e,a){return"</a>"},10:function(l,n,t,e,a){var o,i,s=null!=n?n:l.nullContext||{},r=l.hooks.helperMissing,c=l.escapeExpression,u=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t<li class="tool inactive-toggle" data-id="'+c("function"==typeof(i=null!=(i=u(t,"id")||(null!=n?u(n,"id"):n))?i:r)?i.call(s,{name:"id",hash:{},data:a,loc:{start:{line:23,column:46},end:{line:23,column:52}}}):i)+'">\n\t\t\t\t\t<div class="radio">\n\t\t\t\t\t\t<input type="checkbox" id="inactive-groups-toggle" name="radio-small"'+(null!=(o=u(t,"if").call(s,null!=n?u(n,"inactiveToggleChecked"):n,{name:"if",hash:{},fn:l.program(11,a,0),inverse:l.noop,data:a,loc:{start:{line:25,column:75},end:{line:25,column:129}}}))?o:"")+'>\n\t\t\t\t\t\t<label for="inactive-groups-toggle">\n\t\t\t\t\t\t\t<div class="square"></div>\n\t\t\t\t\t\t\t<span>'+c((u(t,"intlHTMLMessage")||n&&u(n,"intlHTMLMessage")||r).call(s,{name:"intlHTMLMessage",hash:{intlName:"search.HIDE_INACTIVE_GROUPS"},data:a,loc:{start:{line:28,column:13},end:{line:28,column:71}}}))+"</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n"},11:function(l,n,t,e,a){return' checked="checked"'},13:function(l,n,t,e,a){var o,i,s=null!=n?n:l.nullContext||{},r=l.hooks.helperMissing,c="function",u=l.escapeExpression,d=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t<li class="tool toggle toggle-view-type toggle-justified'+(null!=(o=d(t,"if").call(s,null!=n?d(n,"viewTypeJustified"):n,{name:"if",hash:{},fn:l.program(2,a,0),inverse:l.noop,data:a,loc:{start:{line:34,column:60},end:{line:34,column:101}}}))?o:"")+'" data-id="'+u(typeof(i=null!=(i=d(t,"id")||(null!=n?d(n,"id"):n))?i:r)===c?i.call(s,{name:"id",hash:{},data:a,loc:{start:{line:34,column:112},end:{line:34,column:118}}}):i)+'">\n\t\t\t\t\t<a href="'+u(typeof(i=null!=(i=d(t,"justUrl")||(null!=n?d(n,"justUrl"):n))?i:r)===c?i.call(s,{name:"justUrl",hash:{},data:a,loc:{start:{line:35,column:14},end:{line:35,column:25}}}):i)+'" title="'+u((d(t,"intlHTMLMessage")||n&&d(n,"intlHTMLMessage")||r).call(s,{name:"intlHTMLMessage",hash:{intlName:"search.JUSTIFIED_VIEW"},data:a,loc:{start:{line:35,column:34},end:{line:35,column:86}}}))+'" class="toggle-view just" data-track="search-layout-justified"></a>\n\t\t\t\t</li>\n\t\t\t\t<li class="tool toggle toggle-view-type toggle-thumb'+(null!=(o=d(t,"unless").call(s,null!=n?d(n,"viewTypeJustified"):n,{name:"unless",hash:{},fn:l.program(2,a,0),inverse:l.noop,data:a,loc:{start:{line:37,column:56},end:{line:37,column:105}}}))?o:"")+'" data-id="'+u(typeof(i=null!=(i=d(t,"id")||(null!=n?d(n,"id"):n))?i:r)===c?i.call(s,{name:"id",hash:{},data:a,loc:{start:{line:37,column:116},end:{line:37,column:122}}}):i)+'">\n\t\t\t\t\t<a href="'+u(typeof(i=null!=(i=d(t,"thumbUrl")||(null!=n?d(n,"thumbUrl"):n))?i:r)===c?i.call(s,{name:"thumbUrl",hash:{},data:a,loc:{start:{line:38,column:14},end:{line:38,column:26}}}):i)+'" title="'+u((d(t,"intlHTMLMessage")||n&&d(n,"intlHTMLMessage")||r).call(s,{name:"intlHTMLMessage",hash:{intlName:"search.THUMBNAIL_VIEW"},data:a,loc:{start:{line:38,column:35},end:{line:38,column:87}}}))+'" class="toggle-view thumb" data-track="search-layout-thumbs"></a>\n\t\t\t\t</li>\n'},15:function(l,n,t,e,a){var o,i,s=null!=n?n:l.nullContext||{},r=l.hooks.helperMissing,c=l.escapeExpression,u=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t<li class="tool sort" data-id="'+c("function"==typeof(i=null!=(i=u(t,"id")||(null!=n?u(n,"id"):n))?i:r)?i.call(s,{name:"id",hash:{},data:a,loc:{start:{line:42,column:35},end:{line:42,column:41}}}):i)+'">\n\t\t\t\t\t<a href="#" title="'+c((u(t,"intlHTMLMessage")||n&&u(n,"intlHTMLMessage")||r).call(s,{name:"intlHTMLMessage",hash:{intlName:"search.SORT"},data:a,loc:{start:{line:43,column:24},end:{line:43,column:66}}}))+'" class="menu-anchor">'+c(l.lambda(null!=(o=null!=n?u(n,"selectedSort"):n)?u(o,"text"):o,n))+"<span></span></a>\n\t\t\t\t</li>\n"},17:function(l,n,t,e,a){var o,i,s=null!=n?n:l.nullContext||{},r=l.hooks.helperMissing,c=l.escapeExpression,u=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t<li class="tool toggle toggle-advanced'+(null!=(o=u(t,"if").call(s,null!=n?u(n,"advancedPanelVisible"):n,{name:"if",hash:{},fn:l.program(18,a,0),inverse:l.noop,data:a,loc:{start:{line:47,column:42},end:{line:47,column:94}}}))?o:"")+'" data-id="'+c("function"==typeof(i=null!=(i=u(t,"id")||(null!=n?u(n,"id"):n))?i:r)?i.call(s,{name:"id",hash:{},data:a,loc:{start:{line:47,column:105},end:{line:47,column:111}}}):i)+'">\n\t\t\t\t\t<a title="'+c((u(t,"intlHTMLMessage")||n&&u(n,"intlHTMLMessage")||r).call(s,{name:"intlHTMLMessage",hash:{intlName:"search.TOGGLE_ADVANCED"},data:a,loc:{start:{line:48,column:15},end:{line:48,column:68}}}))+'" href="#"><span></span>'+c((u(t,"intlHTMLMessage")||n&&u(n,"intlHTMLMessage")||r).call(s,{name:"intlHTMLMessage",hash:{intlName:"search.ADVANCED"},data:a,loc:{start:{line:48,column:92},end:{line:48,column:138}}}))+"</a>\n\t\t\t\t</li>\n"},18:function(l,n,t,e,a){return" advanced-visible"},20:function(l,n,t,e,a){var o=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t\t\t<li class="tool advanced-clear">\n\t\t\t\t\t\t<a href="#" class="advanced-clear-link">'+l.escapeExpression((o(t,"intlHTMLMessage")||n&&o(n,"intlHTMLMessage")||l.hooks.helperMissing).call(null!=n?n:l.nullContext||{},{name:"intlHTMLMessage",hash:{intlName:"search.CLEAR"},data:a,loc:{start:{line:53,column:46},end:{line:53,column:89}}}))+"</a>\n\t\t\t\t\t</li>\n"},compiler:[8,">= 4.3.0"],main:function(l,n,t,e,a){var o,i=null!=n?n:l.nullContext||{},s=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<div class="search-subnav">\n\t<div class="search-subnav-sizing fluid-centered">\n\t\t<div class="search-subnav-content">\n\t\t\t\n\t\t\t<ul class="links">\n'+(null!=(o=s(t,"each").call(i,null!=n?s(n,"links"):n,{name:"each",hash:{},fn:l.program(1,a,0),inverse:l.noop,data:a,loc:{start:{line:6,column:3},end:{line:18,column:12}}}))?o:"")+'\t\t\t</ul>\n\n\t\t\t<ul class="tools">\n'+(null!=(o=s(t,"if").call(i,null!=n?s(n,"showInactiveToggle"):n,{name:"if",hash:{},fn:l.program(10,a,0),inverse:l.noop,data:a,loc:{start:{line:22,column:4},end:{line:32,column:11}}}))?o:"")+(null!=(o=s(t,"if").call(i,null!=n?s(n,"showTools"):n,{name:"if",hash:{},fn:l.program(13,a,0),inverse:l.noop,data:a,loc:{start:{line:33,column:4},end:{line:40,column:11}}}))?o:"")+(null!=(o=s(t,"if").call(i,null!=n?s(n,"showSort"):n,{name:"if",hash:{},fn:l.program(15,a,0),inverse:l.noop,data:a,loc:{start:{line:41,column:4},end:{line:45,column:11}}}))?o:"")+(null!=(o=s(t,"if").call(i,null!=n?s(n,"showAdvanced"):n,{name:"if",hash:{},fn:l.program(17,a,0),inverse:l.noop,data:a,loc:{start:{line:46,column:4},end:{line:50,column:11}}}))?o:"")+(null!=(o=s(t,"if").call(i,null!=n?s(n,"showAdvancedClearLink"):n,{name:"if",hash:{},fn:l.program(20,a,0),inverse:l.noop,data:a,loc:{start:{line:51,column:4},end:{line:55,column:11}}}))?o:"")+"\t\t\t</ul>\n\t\t\t\n\t\t</div>\n\t</div>\n</div>\n"},useData:!0}),e={};l.Array.each([],(function(n){var t=l.Template.get("hermes/"+n);t&&(e[n]=t)})),l.Template.register("hermes/search-subnav",(function(n,a){return(a=a||{}).partials=a.partials?l.merge(e,a.partials):e,t(n,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-url",(function(e,r){var s,t,a=require("hermes-core/flog")(r),h=/^\/search(?:\/.*)?$/,i=/^bw|blackandwhite$/;function o(e){return"number"==typeof e?e.toString():"boolean"==typeof e?e?"1":"0":"string"==typeof e?e:void 0}s=YUI.Env.isServer?require("querystring").stringify:e.QueryString.stringify,(t=function(r,s,h){var i,p,c,n,l;if(this.appContext=s,"string"==typeof r){if(l=r.split("?"),h?this.searchType=h:(c=-1!==(p=l[0].split("/"))[0].indexOf("http")?3:1,n="/"+p.slice(c).join("/"),this.searchType=this.getSearchTypeFromPathname(n)),l=l.length>1?l[1]:"",this.params={},l)try{l=e.QueryString.parse(l),this.params=e.SearchHelper.mapClassicSearchToAPI(l,s)}catch(e){a.warn("malformed query",{err:e,query:l})}}else this.params=e.merge(r),this.searchType=h;for(i in this.params)this.params.hasOwnProperty(i)&&(this.params[i]=o(this.params[i]));this.params.color_codes&&(this.colors=this.params.color_codes.toString().split(",")),this.searchType||this.setSearchType(t.searchTypes.UNDEFINED)}).prototype.setSearchType=function(r){var s=this.getSearchTerm();return this.searchType=r,this.params=this.validateParams(this.params,this.searchType),this.params=e.merge(this.getDefaultParams(this.searchType),this.params),s&&this.setSearchTerm(s),this},t.prototype.getSearchTypeFromPathname=function(e){switch(e=(e=(e=e||this.pathname).toLowerCase()).split("/").join("")){case"searchpeople":return t.searchTypes.PEOPLE;case"searchgroups":return t.searchTypes.GROUPS;default:return t.searchTypes.PHOTOS}},t.prototype.getPathname=function(){var e="/search/";switch(this.searchType){case t.searchTypes.PEOPLE:e+="people/";break;case t.searchTypes.GROUPS:e+="groups/";break;case t.searchTypes.CLASSIC_GROUPS:e="/search_groups.gne";case t.searchTypes.PHOTOS:}return e},t.prototype.validateParams=function(r,s){var a,h,i,o={};switch(r=e.merge(r),s){case t.searchTypes.PEOPLE:(a=e.merge(e.SearchHelper.PEOPLE_SEARCH_API)).text="text";break;case t.searchTypes.GROUPS:a=e.merge(e.SearchHelper.GROUPS_SEARCH_API);break;case t.searchTypes.PHOTOS:a=e.merge(e.SearchHelper.API,e.SearchHelper.UNIFIED_STATE_PARAMS);break;case t.searchTypes.UNDEFINED:default:return r}if(a)for(h in a)void 0!==r[i=a[h]]&&(o[i]=r[i]);return o},t.prototype.getDefaultParams=function(r){var s={};switch(r){case t.searchTypes.PEOPLE:e.SearchHelper.addPeopleParamDefaults(s);break;case t.searchTypes.GROUPS:e.SearchHelper.addGroupsParamDefaults(s);break;case t.searchTypes.PHOTOS:e.SearchHelper.addParamDefaults(s);case t.searchTypes.UNDEFINED:}return s},t.prototype.getAPIParams=function(){return e.merge(this.params)},t.prototype.getAPIParam=function(e){return this.params[e]},t.prototype.setAPIParam=function(e,r){return this.params[e]=o(r),this},t.prototype.removeAPIParam=function(e){return delete this.params[e],this},t.prototype.removeAllAPIParams=function(){return this.params={},this},t.prototype.getSearchTerm=function(){var r=this.params[this.getSearchTermKey(this.searchType)];return r||(r=this.params[e.SearchHelper.API.tags]),r||""},t.prototype.setSearchTerm=function(r){var s=this.getSearchTermKey(this.searchType);return delete this.params[e.SearchHelper.PEOPLE_SEARCH_API.username],delete this.params[e.SearchHelper.GROUPS_SEARCH_API.text],delete this.params[e.SearchHelper.API.text],delete this.params[e.SearchHelper.API.tags],delete this.params.q,this.params[s]=r,this},t.prototype.getSearchTermKey=function(r){switch(r){case t.searchTypes.PEOPLE:return e.SearchHelper.PEOPLE_SEARCH_API.username;case t.searchTypes.GROUPS:return e.SearchHelper.GROUPS_SEARCH_API.text;case t.searchTypes.PHOTOS:default:return this.params[e.SearchHelper.API.tags]||""===this.params[e.SearchHelper.API.tags]?e.SearchHelper.API.tags:e.SearchHelper.API.text}},t.prototype.removeScope=function(){return e.SearchHelper.SEARCH_SCOPE_PARAMS.forEach(function(e){this.removeAPIParam(e)}.bind(this)),this.removeAPIParam(e.SearchHelper.API.excludeUserId),this},t.prototype.resetToUnified=function(){return this.params[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]&&(this.removeAPIParam(e.SearchHelper.API.userId),this.removeAPIParam(e.SearchHelper.API.contacts),this.removeAPIParam(e.SearchHelper.API.groupId),this.removeAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.albums)),this.removeAPIParam(e.SearchHelper.API.similarityId),this.removeAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll),this},t.prototype.hasAdvancedParams=function(r){return Object.keys(this.params).some((function(s){return-1!==e.SearchHelper.UNIFIED_ADVANCED_PARAMS.indexOf(s)||!r&&-1!==e.SearchHelper.UNIFIED_QUICK_FILTER_PARAMS.indexOf(s)||!r&&-1!==e.SearchHelper.UNIFIED_TOOLBAR_PARAMS.indexOf(s)}))},t.prototype.createNewSearch=function(e){return this.setSearchTerm(e),this.removeScope(),this.searchType!==t.searchTypes.UNDEFINED&&this.searchType!==t.searchTypes.PHOTOS||this.resetToUnified(),this},t.prototype.getURL=function(){var e=this.getId(),r=this.getPathname();return e===t.EMPTY_SEARCH_ID?r:r+"?"+e},t.prototype.getId=function(){var r,a={},h=e.SearchHelper.API;for(r in this.params)h[r]?a[h[r]]=this.params[r]:a[r]=this.params[r];return s(a)||t.EMPTY_SEARCH_ID},t.prototype.clone=function(){return new t(this.params,this.appContext,this.searchType)},t.prototype.setMedia=function(r,s){var t;r||(r=!1),s||(s=!1),t=r&&s?"all":r?"photos":"videos",this.setAPIParam(e.SearchHelper.API.mediaType,t)},t.prototype._syncColors=function(){this.colors&&this.colors.length>0?this.params.color_codes=this.colors.join(","):this.removeAPIParam("color_codes")},t.prototype.addColorCode=function(e){if(e&&e.match(i))return this.clearColorCodes(),this.colors=["bw"],void this._syncColors();this.colors&&-1!==this.colors.indexOf("bw")&&(this.colors=[]),this.colors||(this.colors=[]),-1===this.colors.indexOf(e)&&(this.colors.push(e),this._syncColors())},t.prototype.removeColorCode=function(e){var r;this.colors&&-1!==(r=this.colors.indexOf(e))&&(this.colors.splice(r,1),this._syncColors())},t.prototype.clearColorCodes=function(){this.colors=[],this._syncColors()},t.isSearchUrl=function(e){return h.test(e)},t.prototype.hasSameParams=function(e){if(Object.keys(this.params).length!==Object.keys(e.params).length)return!1;for(let r in this.params)if(!(r in e.params)||e.params[r]!==this.params[r])return!1;return!0},t.searchTypes={UNDEFINED:0,PHOTOS:1,PEOPLE:2,GROUPS:3,CLASSIC_GROUPS:4},t.EMPTY_SEARCH_ID="-1",e.SearchUrl=t}),"@VERSION@",{requires:["search-helper","querystring-parse-simple","querystring-stringify-simple"],optionalRequires:["hermes-core"]});YUI.add("search-subnav-slender-view",(function(e){var r=[{id:"photos",intlKey:"search.PHOTOS",searchType:e.SearchUrl.searchTypes.PHOTOS},{id:"people",intlKey:"search.PEOPLE",searchType:e.SearchUrl.searchTypes.PEOPLE},{id:"groups",intlKey:"search.GROUPS",searchType:e.SearchUrl.searchTypes.GROUPS}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(a){var t,s=this,h=a.modelParams&&a.modelParams.apiParams?e.merge(a.modelParams.apiParams):{},i=[];return this.set("searchType",a.searchType),this.set("searchUrl",new e.SearchUrl(h,this.appContext,this.get("searchType"))),this.set("showAdvancedClearLink",this.get("searchType")===e.SearchUrl.searchTypes.PHOTOS&&this.get("searchUrl").hasAdvancedParams(!1)),r.forEach((function(r){(t=e.merge(r,{title:s.intlMessage({intlName:r.intlKey}),url:s.buildTabUrl(r.id,r.searchType),selected:r.searchType===s.get("searchType")})).selected&&(s.set("currentTabUrl",t.url),s.set("currentTabId",t.id)),i.push(t)})),this.set("links",i),this},buildContainer:function(){return this.setContainerWithTemplate("search-subnav",{showInactiveToggle:!1,showTools:!1,selectedSort:!1,showSort:!1,showAdvanced:!1,links:this.get("links"),showAdvancedClearLink:this.get("showAdvancedClearLink")}),this},activate:function(){return e.SearchUrl.isSearchUrl(this.appContext.getPreviousURL())||this.clearStoredTabUrls(),this.get("currentTabUrl")&&this.get("currentTabId")&&this.storeTabUrl(this.get("currentTabUrl"),this.get("currentTabId")),this.get("showAdvancedClearLink")&&this.registerEventHandler(this.get("container").one(".advanced-clear-link").on("click",this.handleClearAdvancedSearchClick.bind(this))),this},buildTabUrl:function(r,a){var t,s=a!==this.get("searchType")?this.checkForStoredUrl(r):null,h=this.get("searchUrl").getSearchTerm();return s?h!==(t=new e.SearchUrl(s,this.appContext,a)).getSearchTerm()&&t.removeScope().resetToUnified().setSearchTerm(h):(t=this.get("searchUrl").clone().setSearchType(a),a!==this.get("searchType")&&(t.removeAPIParam(e.SearchHelper.API.sort),t.removeAPIParam(e.SearchHelper.API.safeSearch)),a!==e.SearchUrl.searchTypes.PHOTOS&&t.removeScope()),t.getURL()},checkForStoredUrl:function(r){var a,t;return YUI.Env.isServer||(t=this.getStorageKeyFromTabId(r),a=e.StorageHelper.getItem(t,!0)),a},clearStoredTabUrls:function(){var r,a=this;YUI.Env.isServer||this.get("links").forEach((function(t){r=a.getStorageKeyFromTabId(t.id),e.StorageHelper.remove(r,!0)}))},storeTabUrl:function(r,a){var t;YUI.Env.isServer||(t=this.getStorageKeyFromTabId(a),e.StorageHelper.setItem(t,r,!0))},getStorageKeyFromTabId:function(e){return"searchUrl-"+e},handleClearAdvancedSearchClick:function(r){var a,t=this.get("searchUrl").getSearchTerm(),s=this.get("searchUrl").getAPIParams();r.halt(),e.SearchHelper.clearParamsExceptSearchScope(s),delete s[e.SearchHelper.API.commons],a=new e.SearchUrl(s,this.appContext,this.searchType),t&&a.setSearchTerm(t),this.appContext.flapp.navigate(a.getURL())}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-subnav","storage-helper","search-helper","search-url"],langBundles:["search"]});YUI.add("hermes-lang-search",(function(e,a){e.Intl.add("hermes/search","en-US",{RELEVANT:[{type:0,value:"Relevant"}],RECENT:[{type:0,value:"Recent"}],INTERESTING:[{type:0,value:"Interesting"}],NAME:[{type:0,value:"Name"}],ACTIVITY:[{type:0,value:"Activity"}],SIZE:[{type:0,value:"Size"}],OLDEST:[{type:0,value:"Oldest"}],NEWEST:[{type:0,value:"Newest"}],DEFAULT_SEARCH:[{type:0,value:'This is where you search Flickr. Here’s a search for <span class="default-search">'},{type:1,value:"query"},{type:0,value:"</span> to get you started!"}],FLICKR_SEARCH:[{type:0,value:"Flickr Search"}],NO_MATCHES_FOR_QUERY_TERM:[{type:0,value:"Oops! There are no matches for “"},{type:1,value:"searchTerm"},{type:0,value:"”."}],NO_MATCHES_FOR_QUERY_TERM_WITH_SETTINGS:[{type:0,value:"Oops! There are no matches for “"},{type:1,value:"searchTerm"},{type:0,value:"” with your selected settings."}],NO_MATCHES_FOR_QUERY:[{type:0,value:"Oops! There are no matches for your search."}],TRY_DIFFERENT:[{type:0,value:"Please try refining your search."}],TRY_DIFFERENT_BROADER:[{type:0,value:"Please try broadening your search."}],SEARCH_ERROR:[{type:0,value:"Oops! The date you entered does not exist."}],SEARCH_START:[{type:0,value:"Start your search"}],SEARCHING:[{type:0,value:"Searching"}],FETCHING_PHOTOS:[{type:0,value:"Fetching more photos..."}],SEARCH:[{type:0,value:"Search"}],START_YOUR_SEARCH:[{type:0,value:"Start your search"}],BY_USER:[{type:0,value:"by "},{type:1,value:"user"}],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_YOUR:[{type:0,value:"Oops! There are no matches for “"},{type:1,value:"searchTerm"},{type:0,value:"” in your photos."}],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_CONTACTS:[{type:0,value:"Oops! There are no matches for “"},{type:1,value:"searchTerm"},{type:0,value:"” in your contacts’ photos."}],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_USER:[{type:0,value:"Oops! There are no matches for “"},{type:1,value:"searchTerm"},{type:0,value:"” in this user’s photos."}],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_GROUP:[{type:0,value:"Oops! There are no matches for “"},{type:1,value:"searchTerm"},{type:0,value:"” in this group."}],NO_MATCHES_FOR_QUERY_TERM_YOUR:[{type:0,value:"Oops! There are no matches for your search in your photos."}],NO_MATCHES_FOR_QUERY_TERM_CONTACTS:[{type:0,value:"Oops! There are no matches for your search in your contacts’ photos."}],NO_MATCHES_FOR_QUERY_TERM_USER:[{type:0,value:"Oops! There are no matches for your search in this user’s photos."}],NO_MATCHES_FOR_QUERY_TERM_GROUP:[{type:0,value:"Oops! There are no matches for your search in this group."}],API_ERROR_HEADER:[{type:0,value:"Oh noes! We couldn’t process your search."}],API_ERROR_SUBHEADER:[{type:0,value:"Please change it up a bit and try again."}],PEOPLE_YOU_FOLLOW:[{type:0,value:"People you follow"}],ALL_FLICKR_MEMBERS:[{type:0,value:"All Flickr members"}],FLICKR_MEMBERS:[{type:0,value:"Flickr members"}],YOUR_GROUPS:[{type:0,value:"Your groups"}],ALL_FLICKR_GROUPS:[{type:0,value:"All Flickr groups"}],FLICKR_GROUPS:[{type:0,value:"Flickr groups"}],MEMBER_COUNT:[{type:6,value:"count",options:{zero:{value:[{type:0,value:"0 members"}]},one:{value:[{type:7},{type:0,value:" member"}]},other:{value:[{type:7},{type:0,value:" members"}]}},offset:0,pluralType:"cardinal"}],GROUP_PHOTO_COUNT:[{type:6,value:"count",options:{zero:{value:[{type:0,value:"no photos"}]},one:{value:[{type:7},{type:0,value:" photo"}]},other:{value:[{type:7},{type:0,value:" photos"}]}},offset:0,pluralType:"cardinal"}],GROUP_DISCUSSION_COUNT:[{type:6,value:"count",options:{zero:{value:[{type:0,value:"no discussions"}]},one:{value:[{type:7},{type:0,value:" discussion"}]},other:{value:[{type:7},{type:0,value:" discussions"}]}},offset:0,pluralType:"cardinal"}],YOUR_PHOTOS:[{type:0,value:"Your photos"}],YOUR_ALBUMS:[{type:0,value:"Your albums"}],YOUR_GALLERIES:[{type:0,value:"Your galleries"}],FROM_YOUR_CONTACTS:[{type:0,value:"From your contacts"}],EVERYONES_PHOTOS:[{type:0,value:"Everyone’s photos"}],VIEW_ALL_COUNT:[{type:6,value:"count",options:{zero:{value:[{type:0,value:"no more photos"}]},other:{value:[{type:0,value:"View all "},{type:7}]}},offset:0,pluralType:"cardinal"}],RESULTS_COUNT:[{type:6,value:"count",options:{zero:{value:[{type:0,value:"no results"}]},one:{value:[{type:7},{type:0,value:" result"}]},other:{value:[{type:7},{type:0,value:" results"}]}},offset:0,pluralType:"cardinal"}],PEOPLE_PHOTOS_COUNT:[{type:6,value:"count",options:{zero:{value:[{type:0,value:"0 photos"}]},one:{value:[{type:7},{type:0,value:" photo"}]},other:{value:[{type:7},{type:0,value:" photos"}]}},offset:0,pluralType:"cardinal"}],PEOPLE_VIDEOS_COUNT:[{type:6,value:"count",options:{zero:{value:[{type:0,value:"no videos"}]},one:{value:[{type:7},{type:0,value:" video"}]},other:{value:[{type:7},{type:0,value:" videos"}]}},offset:0,pluralType:"cardinal"}],PEOPLE_FOLLOWERS_COUNT:[{type:6,value:"count",options:{zero:{value:[{type:0,value:"no followers"}]},one:{value:[{type:7},{type:0,value:" follower"}]},other:{value:[{type:7},{type:0,value:" followers"}]}},offset:0,pluralType:"cardinal"}],SAFESEARCH_ON:[{type:0,value:"SafeSearch on"}],SAFESEARCH_OFF:[{type:0,value:"SafeSearch off"}],SAFESEARCH_MODERATE:[{type:0,value:"SafeSearch moderate"}],SEARCH_PHOTOSTREAM:[{type:0,value:"Search photostream"}],SEARCH_FAVORITES:[{type:0,value:"Search favorites"}],ANY_LICENSE:[{type:0,value:"Any license"}],ALL_CC:[{type:0,value:"All creative commons"}],COMMERCIAL_USE:[{type:0,value:"Commercial use allowed"}],MODS_ALLOWED:[{type:0,value:"Modifications allowed"}],COMMERCIAL_USE_MODS:[{type:0,value:"Commercial use & mods allowed"}],NO_RESTRICTIONS:[{type:0,value:"No known copyright restrictions"}],MARKETPLACE_LICENSE:[{type:0,value:"Flickr Marketplace"}],US_GOVT:[{type:0,value:"U.S. Government works"}],PUBLIC_DOMAIN_DEDICATION:[{type:0,value:"Public Domain Dedication (CC0)"}],PUBLIC_DOMAIN_WORK:[{type:0,value:"Public Domain Work"}],CC_BY_NC_SA:[{type:0,value:"Attribution-NonCommercial-ShareAlike"}],CC_BY_NC:[{type:0,value:"Attribution-NonCommercial"}],CC_BY_NC_ND:[{type:0,value:"Attribution-NonCommercial-NoDerivs"}],CC_BY:[{type:0,value:"Attribution"}],CC_BY_SA:[{type:0,value:"Attribution-ShareAlike"}],CC_BY_ND:[{type:0,value:"Attribution-NoDerivs"}],PLAIN_COUNT:[{type:6,value:"count",options:{zero:{value:[{type:0,value:"0"}]},one:{value:[{type:7}]},other:{value:[{type:7}]}},offset:0,pluralType:"cardinal"}],PHOTOS:[{type:0,value:"Photos"}],PEOPLE:[{type:0,value:"People"}],GROUPS:[{type:0,value:"Groups"}],PHOTOS_POSSESSIVE:[{type:1,value:"name"},{type:0,value:"’s photos"}],FAVES_POSSESSIVE:[{type:1,value:"name"},{type:0,value:"’s favorites"}],CONTACTS_POSSESSIVE:[{type:1,value:"name"},{type:0,value:"’s contacts"}],GROUPS_POSSESSIVE:[{type:1,value:"name"},{type:0,value:"’s groups"}],VIEWER_FAVES:[{type:0,value:"Your favorites"}],IN_GROUP_POOL:[{type:0,value:"In the "},{type:1,value:"name"},{type:0,value:" group pool"}],OPT_OUT_MESSAGE:[{type:0,value:"You are viewing the alpha version of our new search experience. Click here to return to the old version."}],OPT_IN_MESSAGE:[{type:0,value:"Go back to the alpha search experience"}],OPT_OUT_MESSAGE_BETA:[{type:0,value:"You are viewing the beta version of our new search experience. Click here to return to the old version."}],OPT_IN_MESSAGE_BETA:[{type:0,value:"Go back to the beta search experience"}],SEARCH_BETA_LABEL:[{type:0,value:"Search beta"}],SEARCH_ALPHA_LABEL:[{type:0,value:"Search alpha"}],GO_BACK_TO_OLD_SEARCH:[{type:0,value:"Go back to the old Flickr search"}],PROVIDE_FEEDBACK:[{type:0,value:"Provide feedback"}],FROM_PEOPLE_YOU_FOLLOW:[{type:0,value:"From people you follow"}],FULL_TEXT_AND_TAGS:[{type:0,value:"Full text with suggested tags"}],FULL_TEXT:[{type:0,value:"Full text"}],TAGS_ONLY:[{type:0,value:"Tags only"}],RED:[{type:0,value:"Red"}],DARK_ORANGE:[{type:0,value:"Dark orange"}],ORANGE:[{type:0,value:"Orange"}],SCHOOL_BUS_YELLOW:[{type:0,value:"School bus yellow"}],LEMON_YELLOW:[{type:0,value:"Lemon yellow"}],GREEN:[{type:0,value:"Green"}],LIME_GREEN:[{type:0,value:"Dark lime green"}],CYAN:[{type:0,value:"Cyan"}],BLUE:[{type:0,value:"Blue"}],VIOLET:[{type:0,value:"Violet"}],PINK:[{type:0,value:"Pink"}],PALE_PINK:[{type:0,value:"Pale pink"}],WHITE:[{type:0,value:"White"}],GRAY:[{type:0,value:"Gray"}],BLACK:[{type:0,value:"Black"}],MONOCHROME:[{type:0,value:"monochrome"}],JOINED_DATE:[{type:0,value:"Joined "},{type:3,value:"intlDate",style:"monthYearShort"}],HIDE_INACTIVE_GROUPS:[{type:0,value:"Hide inactive groups"}],ADVANCED:[{type:0,value:"Advanced"}],ORIENTATION_AND_SIZE:[{type:0,value:"Orientation & size"}],ORIENTATION:[{type:0,value:"Orientation"}],MINIMUM_SIZE:[{type:0,value:"Minimum size"}],PORTRAIT:[{type:0,value:"Portrait"}],SQUARE:[{type:0,value:"Square"}],LANDSCAPE:[{type:0,value:"Landscape"}],PANORAMA:[{type:0,value:"Panorama"}],SMALL_SHOW_ALL_SIZES:[{type:0,value:"Small (show all sizes)"}],ALL_SIZES:[{type:0,value:"All sizes"}],MEDIUM:[{type:0,value:"Medium"}],LARGE:[{type:0,value:"Large"}],CUSTOM:[{type:0,value:"Custom"}],COLOR:[{type:0,value:"Color"}],DATE:[{type:0,value:"Date"}],TO:[{type:0,value:"To"}],DATE_TAKEN:[{type:0,value:"Date taken"}],DATE_POSTED:[{type:0,value:"Date posted"}],DATE_UPLOADED:[{type:0,value:"Date uploaded"}],CONTENT:[{type:0,value:"Content"}],VIDEOS:[{type:0,value:"Videos"}],SCREENSHOTS:[{type:0,value:"Screenshots"}],ILLUSTRATIONS:[{type:0,value:"Illustrations"}],SEARCH_IN:[{type:0,value:"Search in"}],RESET:[{type:0,value:"Reset"}],JUSTIFIED_VIEW:[{type:0,value:"Justified view"}],THUMBNAIL_VIEW:[{type:0,value:"Thumbnail view"}],TILE_VIEW:[{type:0,value:"Tile view"}],SORT:[{type:0,value:"Sort"}],TOGGLE_ADVANCED:[{type:0,value:"Toggle advanced"}],CAMERA_SETTINGS:[{type:0,value:"Camera settings"}],TOGGLE_SEARCH:[{type:0,value:"Toggle Search"}],PHOTOS_PEOPLE_OR_GROUPS:[{type:0,value:"Photos, people, or groups"}],PHOTOS_PEOPLE_GROUPS:[{type:0,value:"Photos, people, groups"}],SMALL_SHORT:[{type:0,value:"S"}],MEDIUM_SHORT:[{type:0,value:"M"}],LARGE_SHORT:[{type:0,value:"L"}],ALL:[{type:0,value:"All"}],TAGS:[{type:0,value:"Tags"}],CLEAR:[{type:0,value:"Clear"}],ABSTRACT:[{type:0,value:"Abstract"}],ART:[{type:0,value:"Art"}],BLACK_AND_WHITE:[{type:0,value:"Black and white"}],MONOCHROME_STYLE:[{type:0,value:"Monochrome"}],BLUR:[{type:0,value:"Blur"}],BRIGHT:[{type:0,value:"Bright"}],CURVES:[{type:0,value:"Curves"}],DIAGONAL:[{type:0,value:"Diagonal"}],ETHEREAL:[{type:0,value:"Ethereal"}],GEOMETRIC:[{type:0,value:"Geometric"}],HDR:[{type:0,value:"HDR"}],LINES:[{type:0,value:"Lines"}],MACRO:[{type:0,value:"Macro"}],DEPTH_OF_FIELD:[{type:0,value:"Shallow depth of field"}],MINIMALIST:[{type:0,value:"Minimalist"}],PASTEL:[{type:0,value:"Pastel"}],PATTERNS:[{type:0,value:"Patterns"}],ROUND:[{type:0,value:"Round"}],SERENE:[{type:0,value:"Serene"}],SYMMETRY:[{type:0,value:"Symmetry"}],TEXTURES:[{type:0,value:"Textures"}],TRIANGLES:[{type:0,value:"Triangles"}],VINTAGE:[{type:0,value:"Vintage"}],BOKEH:[{type:0,value:"Bokeh"}],SEARCH_PHOTOS:[{type:0,value:"Search photos"}],SEARCH_PEOPLE:[{type:0,value:"Search people"}],SEARCH_GROUPS:[{type:0,value:"Search groups"}],EVERYONE:[{type:0,value:"Everyone"}],SIGN_IN_BEFORE_SEARCH_TITLE:[{type:0,value:"This content is for mature audiences only."}],SIGN_IN_BEFORE_SEARCH_MESSAGE:[{type:0,value:"Join Flickr to turn off safe search."}],SIGNUP_FOOTER_MESSAGE:[{type:0,value:"Private photo management and an inspiring community."}],SIDEBAR_SEARCH_RELATED:[{type:0,value:"Related searches"}],SIDEBAR_GROUP_SEARCH_RESULTS:[{type:0,value:"Group results"}],SIDEBAR_PHOTOS_SEARCH_RESULTS:[{type:0,value:"Photo results"}],VIRTUAL_PHOTOGRAPHY:[{type:0,value:"Virtual Photography"}],ART_ILLUSATRATON_CGI:[{type:0,value:"Art / Illustration / CGI"}],STYLE_LABEL:[{type:0,value:"Style"}],SEARCH_FILTERS_LABEL:[{type:0,value:"Search filters"}],SAFESEARCH_IS_ON_GROUPS:[{type:0,value:"SafeSearch is On which hides 18+ groups in search results. You can try a different search or show 18+ groups."}],SHOW_18_PLUS_GROUPS:[{type:0,value:"Show 18+ groups"}],SAFESEARCH_IS_ON:[{type:0,value:"SafeSearch is On which hides moderate or restricted content in search results. You can try a different search or change your SafeSearch filter."}],CHANGE_SAFESEARCH:[{type:0,value:"Change SafeSearch"}],SAFESEARCH_IS_MODERATE:[{type:0,value:"SafeSearch is set to moderate which hides restricted content in search results. You can try a different search or change your SafeSearch filter."}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-search-empty",(function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,l,a){return"safe-search"},3:function(e,t,n,l,a){var s,r=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t<div class="no-results-message">\n\t\t\t\t<h5>'+r(e.lambda(null!=(s=null!=t?o(t,"noMatchesForQuery"):t)?o(s,"noMatchesText"):s,t))+"</h5>\n\t\t\t\t<h5>"+r((o(n,"intlMessage")||t&&o(t,"intlMessage")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{name:"intlMessage",hash:{intlName:"search.TRY_DIFFERENT_BROADER"},data:a,loc:{start:{line:6,column:8},end:{line:6,column:63}}}))+"</h5>\n\t\t\t</div>\n"},5:function(e,t,n,l,a){var s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,o=e.escapeExpression,i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t<div class="no-results-message">\n\t\t\t\t<h5>'+o((i(n,"intlMessage")||t&&i(t,"intlMessage")||r).call(s,{name:"intlMessage",hash:{intlName:"search.API_ERROR_HEADER"},data:a,loc:{start:{line:11,column:8},end:{line:11,column:58}}}))+"</h5>\n\t\t\t\t<h5>"+o((i(n,"intlMessage")||t&&i(t,"intlMessage")||r).call(s,{name:"intlMessage",hash:{intlName:"search.API_ERROR_SUBHEADER"},data:a,loc:{start:{line:12,column:8},end:{line:12,column:61}}}))+"</h5>\n\t\t\t</div>\n"},7:function(e,t,n,l,a){var s,r=e.lambda,o=e.escapeExpression,i=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t<div class="no-results-message safe-search">\n\t\t\t\t<h5>'+o(r(null!=(s=null!=t?c(t,"safeSearchLimitedResults"):t)?c(s,"safeSearchLimitedResultsText"):s,t))+'</h5>\n\t\t\t\t<button class="flex hollow black disable-safe-search '+(null!=(s=c(n,"if").call(i,null!=(s=null!=t?c(t,"safeSearchLimitedResults"):t)?c(s,"showSafeSearchDropdown"):s,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.noop,data:a,loc:{start:{line:18,column:57},end:{line:18,column:129}}}))?s:"")+'">\n\t\t\t\t\t'+o(r(null!=(s=null!=t?c(t,"safeSearchLimitedResults"):t)?c(s,"safeSearchLimitedResultsButtonText"):s,t))+"\n"+(null!=(s=c(n,"if").call(i,null!=(s=null!=t?c(t,"safeSearchLimitedResults"):t)?c(s,"showSafeSearchDropdown"):s,{name:"if",hash:{},fn:e.program(10,a,0),inverse:e.noop,data:a,loc:{start:{line:20,column:5},end:{line:24,column:12}}}))?s:"")+"\t\t\t\t</button>\n\t\t\t</div>\n"},8:function(e,t,n,l,a){return"with-arrow"},10:function(e,t,n,l,a){return'\t\t\t\t\t\t<span class="arrow">\n\t\t\t\t\t\t\t<svg class="icon icon-dropdown_arrow"><use xlink:href="#icon-dropdown_arrow"></use></svg>\n\t\t\t\t\t\t</span>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,l,a){var s,r=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="search-empty '+(null!=(s=o(n,"if").call(r,null!=t?o(t,"safeSearchLimitedResults"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:25},end:{line:1,column:75}}}))?s:"")+'">\n\t<div class="no-results-message-container">\n'+(null!=(s=o(n,"if").call(r,null!=t?o(t,"noMatchesForQuery"):t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:3,column:2},end:{line:8,column:9}}}))?s:"")+(null!=(s=o(n,"if").call(r,null!=t?o(t,"apiFailed"):t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a,loc:{start:{line:9,column:2},end:{line:14,column:9}}}))?s:"")+(null!=(s=o(n,"if").call(r,null!=t?o(t,"safeSearchLimitedResults"):t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a,loc:{start:{line:15,column:2},end:{line:27,column:9}}}))?s:"")+"\t</div>\n</div>\n\n"},useData:!0}),l={};e.Array.each([],(function(t){var n=e.Template.get("hermes/"+t);n&&(l[t]=n)})),e.Template.register("hermes/search-empty",(function(t,a){return(a=a||{}).partials=a.partials?e.merge(l,a.partials):l,n(t,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-empty-view",(function(e){"use strict";e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(a){var t=a.modelParams&&a.modelParams.apiParams?e.merge(a.modelParams.apiParams):{};this.searchUrl=new e.SearchUrl(t,this.appContext,a.searchType||e.SearchUrl.searchTypes.UNDEFINED),this.searchType=a.searchType,this.isMobile=a.isMobile,""===this.get("container").get("innerHTML")&&this.setContainerHTML("")},buildContainer:function(){var a="search.PHOTOS_PEOPLE_OR_GROUPS";return this.isMobile&&(this.searchType===e.SearchUrl.searchTypes.PHOTOS?a="search.SEARCH_PHOTOS":this.searchType===e.SearchUrl.searchTypes.PEOPLE?a="search.SEARCH_PEOPLE":this.searchType===e.SearchUrl.searchTypes.GROUPS&&(a="search.SEARCH_GROUPS")),a=this.intlMessage({intlName:a}),this.setContainerWithTemplate("search-empty",{searchPlaceholder:a,noMatchesForQuery:this.get("noMatchesForQuery"),apiFailed:this.get("apiFailed"),safeSearchLimitedResults:this.get("safeSearchLimitedResults")}),this},activate:function(){var e=this.get("container"),a=e.one("#search-field"),t=e.one(".disable-safe-search");return a&&setTimeout((function(){let e=a.getDOMNode(),t=e.value.length;e.setSelectionRange(t,t),a.focus()}),1e3),t&&this.registerEventHandler(t.on("click",(()=>{this.get("safeSearchLimitedResults").showSafeSearchDropdown?this.createSafeSearchDroparound():this.get("safeSearchLimitedResults").showAdultGroupsToggle&&this.showAdultGroups()}))),this},enableBlankState:function(e){this.get("container").addClass("blank")},onParentViewEvent:function(e,a){a&&"error-msg-updated"===a[0]&&this.isBuilt&&(this.buildContainer(),this.activate())},createSafeSearchDroparound:function(){var a=this.get("container").one(".disable-safe-search").one(".arrow"),t=[{text:this.intlMessage({intlName:"search.SAFESEARCH_ON"}),value:"safe"},{text:this.intlMessage({intlName:"search.SAFESEARCH_MODERATE"}),value:"moderate"},{text:this.intlMessage({intlName:"search.SAFESEARCH_OFF"}),value:"restricted"}];this.safeSearchMenu=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnActionClick:!0,showDropArrow:!0,anchorElement:a,classList:"",overlayClassList:"",menuItems:t,preferBottom:!0,anchorOffsetVertical:-8}),this.safeSearchMenu.show(),this.registerEventHandler(this.safeSearchMenu.on("selected",(a=>{switch(this.safeSearchMenu.close(),a.menuItem.value){case"safe":this.searchUrl.setAPIParam(e.SearchHelper.API.safeSearch,e.SearchHelper.PHOTOS_SAFE_SEARCH_SETTINGS.safe);break;case"moderate":this.searchUrl.setAPIParam(e.SearchHelper.API.safeSearch,e.SearchHelper.PHOTOS_SAFE_SEARCH_SETTINGS.moderate);break;case"restricted":this.searchUrl.setAPIParam(e.SearchHelper.API.safeSearch,e.SearchHelper.PHOTOS_SAFE_SEARCH_SETTINGS.restricted)}this.fire("subviewViewEvent","search:dirty"),this.appContext.flapp.navigate(this.searchUrl.getURL())})))},showAdultGroups:function(){this.searchUrl.setAPIParam(e.SearchHelper.GROUPS_SEARCH_API.safeSearch,"3"),this.appContext.flapp.navigate(this.searchUrl.getURL())}},{ATTRS:{noMatchesForQuery:{value:!1,validator:function(e,a){return!e||"object"==typeof e&&e.hasOwnProperty("noMatchesText")}},apiFailed:{value:!1,validator:function(a,t){return e.AttributeHelpers.validateBoolean(a)}},safeSearchLimitedResults:{value:!1,validator:function(e,a){return!e||"object"==typeof e&&e.hasOwnProperty("safeSearchLimitedResultsText")}}}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","search-url","attribute-helpers","hermes-template-search-empty"],langBundles:["search"]});YUI.add("set-meta-models",(function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{langBundles:this.details.langBundles,name:this.name,remote:{},attributes:{displayType:{readOnly:!0,defaultFn:function(){return"set"}},title:{validator:function(t,i){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},owner:{isModel:!0},photoCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},videoCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},photoCountDisplay:{readOnly:!0,derivedBy:["owner"],defaultFn:function(e){var t=this.getValue(e,"photoCount"),i=this.getValue(e,"videoCount"),n="";return 0===(t-=i)&&0===i?n=this.intlMessage({intlName:"models.ZERO_PHOTOS"}):1===t&&0===i?n=this.intlMessage({intlName:"models.ONE_PHOTO"}):t>1&&0===i?n=this.intlMessage({intlName:"models.MULTIPLE_PHOTOS",photos:t}):0===t&&1===i?n=this.intlMessage({intlName:"models.ONE_VIDEO"}):1===t&&1===i?n=this.intlMessage({intlName:"models.ONE_PHOTO_AND_ONE_VIDEO"}):t>1&&1===i?n=this.intlMessage({intlName:"models.MULTIPLE_PHOTOS_AND_ONE_VIDEO",photos:t}):0===t&&i>1?n=this.intlMessage({intlName:"models.MULTIPLE_VIDEOS",videos:i}):1===t&&i>1?n=this.intlMessage({intlName:"models.ONE_PHOTO_AND_MULTIPLE_VIDEOS",videos:i}):t>1&&i>1&&(n=this.intlMessage({intlName:"models.MULTIPLE_PHOTOS_AND_MULTIPLE_VIDEOS",photos:t,videos:i})),n}},primary:{},primaryPhotoSizes:{},bestIconURL:{readOnly:!0,derivedBy:["primaryPhotoSizes"],defaultFn:function(e){var t=this.getValue(e,"primaryPhotoSizes");return t.sq?t.sq.src:void 0}},url:{readOnly:!0,derivedBy:["owner"],defaultFn:function(e){var t=this.getValue(e,"owner");return t?"/photos/"+t.getValue("pathAlias")+"/albums/"+e:void 0}},isAutoUploadSet:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},urlSuffix:{readOnly:!0,defaultFn:function(e){return"set-"+e}}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-promise"],langBundles:["models"]});YUI.add("flickr-photosets-search-fetcher",(function(e,t){"use strict";function s(t){var s,r={extras:e.APIHelper.request.getRebootSearchSetsExtras(),per_page:t.perPage||50,page:t.page||1};return s=e.merge(r,t.apiParams||{}),YUI.Env.isServer&&e.SearchHelper.unescapeParameters(s),s}e.namespace("ListFetchers")["flickr-photosets-search"]={run:function(r,o){var a=this,p=r.emptyQuery?{}:s(r),i=p.user_id;return i?e.Promise.all([r.emptyQuery?e.Promise.resolve({photos:{photo:[]}}):o.callAPI("flickr.photosets.search",p),o.getModelRegistry("search-sets-models"),o.getModelRegistry("set-meta-models"),o.getModel("person-models",i)]).then((function(e){return a._processResponse(e,r)}),e.FetcherErrorLogger(t)):e.Promise.reject("[flickr-photosets-search-fetcher] called without `user_id` param")},_processParams:s,_processResponse:function(t,s){var r,o,a=[],p=[],i=t[0],h=t[1],l=t[2],c=i.photosets.photoset.length;for(o=0;o<c;o++)(a=e.APIHelper.response.parsePhotoSetMeta(i.photosets.photoset[o])).owner=t[3],l.addOrUpdate(a),p.push(l.proxy(a.id));return r={id:s.id,sets:p,totalItems:i.photosets.total},h.exists(s.id)&&1!==s.page?h.getValue(s.id,"sets").addPage({page:s.page,perPage:s.perPage,pageContent:p,totalItems:parseInt(i.photosets.total||0,10)}):h.addOrUpdate(r),r.sets}}}),"@VERSION@",{requires:["flickr-promise","search-helper","api-helper","set-meta-models","querystring-parse-simple"],optional:[]});YUI.add("search-sets-models",(function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-photosets-search"].run(t,this.appContext)}},attributes:{sets:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-photosets-search"],listItemIdField:"id"}},apiParams:{writeOnce:"initOnly"},totalItems:{setter:function(t){return(t=e.AttributeHelpers.coerceInteger(t))<0&&(t=0),t},defaultValue:0},emptyQuery:{defaultValue:!1}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-photosets-search-fetcher","search-helper"]});