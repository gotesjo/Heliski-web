YUI.add("hermes-template-search-style-picker",(function(e,l){var n=e.Template.Handlebars.revive({1:function(e,l,n,a,t){var s=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'\t<p class="option-header tabbable" tabindex="0">'+e.escapeExpression((s(n,"intlMessage")||l&&s(l,"intlMessage")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},{name:"intlMessage",hash:{intlName:"search.STYLE_LABEL"},data:t,loc:{start:{line:2,column:48},end:{line:2,column:93}}}))+"</p>\n"},3:function(e,l,n,a,t){var s,r,o=null!=l?l:e.nullContext||{},i=e.hooks.helperMissing,c="function",u=e.escapeExpression,m=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'\t\t<li class="style-button '+u(typeof(r=null!=(r=m(n,"cssClass")||(null!=l?m(l,"cssClass"):l))?r:i)===c?r.call(o,{name:"cssClass",hash:{},data:t,loc:{start:{line:6,column:26},end:{line:6,column:38}}}):r)+(null!=(s=m(n,"if").call(o,null!=l?m(l,"useDarkCheckMark"):l,{name:"if",hash:{},fn:e.program(4,t,0),inverse:e.noop,data:t,loc:{start:{line:6,column:38},end:{line:6,column:80}}}))?s:"")+(null!=(s=m(n,"if").call(o,null!=l?m(l,"selected"):l,{name:"if",hash:{},fn:e.program(6,t,0),inverse:e.noop,data:t,loc:{start:{line:6,column:80},end:{line:6,column:111}}}))?s:"")+'" data-style-value="'+u(typeof(r=null!=(r=m(n,"value")||(null!=l?m(l,"value"):l))?r:i)===c?r.call(o,{name:"value",hash:{},data:t,loc:{start:{line:6,column:131},end:{line:6,column:140}}}):r)+'" data-tooltip-title="'+u((m(n,"intlMessage")||l&&m(l,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:null!=l?m(l,"intlKey"):l},data:t,loc:{start:{line:6,column:162},end:{line:6,column:194}}}))+'" tabindex="0" role="button" aria-label="'+u((m(n,"intlMessage")||l&&m(l,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:null!=l?m(l,"intlKey"):l},data:t,loc:{start:{line:6,column:235},end:{line:6,column:267}}}))+'">\n\t\t\t<div class="style-image"></div>\n\t\t</li>\n'},4:function(e,l,n,a,t){return" dark-check"},6:function(e,l,n,a,t){return" checked"},compiler:[8,">= 4.3.0"],main:function(e,l,n,a,t){var s,r=null!=l?l:e.nullContext||{},o=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return(null!=(s=o(n,"if").call(r,null!=l?o(l,"showTitle"):l,{name:"if",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))?s:"")+'<ul class="style-list">\n'+(null!=(s=o(n,"each").call(r,null!=l?o(l,"styles"):l,{name:"each",hash:{},fn:e.program(3,t,0),inverse:e.noop,data:t,loc:{start:{line:5,column:1},end:{line:9,column:10}}}))?s:"")+"</ul>\n"},useData:!0}),a={};e.Array.each([],(function(l){var n=e.Template.get("hermes/"+l);n&&(a[l]=n)})),e.Template.register("hermes/search-style-picker",(function(l,t){return(t=t||{}).partials=t.partials?e.merge(a,t.partials):a,n(l,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-style-picker-view",(function(e){var t=[{intlKey:"search.BLACK_AND_WHITE",value:"blackandwhite",cssClass:"black-and-white"},{intlKey:"search.DEPTH_OF_FIELD",value:"depthoffield",cssClass:"depth-of-field"},{intlKey:"search.MINIMALIST",value:"minimalism",cssClass:"minimalist"},{intlKey:"search.PATTERNS",value:"pattern",cssClass:"patterns"}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(s){var l,i=this;return this.searchUrl=s.searchUrl||new e.SearchUrl({},this.appContext,e.SearchUrl.searchTypes.PHOTOS),l=this.searchUrl.getAPIParam(e.SearchHelper.API.styles),this.selectedStyles=l?l.split(","):[],this.styles=[],t.forEach((function(t){i.styles.push(e.merge(t,{selected:-1!==i.selectedStyles.indexOf(t.value)}))})),this.showTitle=s.showTitle,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("search-style-picker",{showTitle:this.showTitle,styles:this.styles}),this},activate:function(){var e=this.get("container");return this.registerEventHandler(e.delegate("click",this.handleFilterClick.bind(this),".style-button")),this.registerEventHandler(e.delegate("key",this.handleFilterClick.bind(this),"down:13",".style-button")),this},onParentViewEvent:function(e,t){if("search:colorSelected"===(t&&t.length&&t[0]))this.clearSelectedStyle("blackandwhite")},handleFilterClick:function(e){var t=e.target.ancestor(".style-button",!0),s=t.getData("style-value"),l=this.selectedStyles.indexOf(s),i=this.styles.find(((e,t)=>e.value===s));e.halt(),-1===l?(this.selectedStyles.push(s),t.addClass("checked"),i&&(i.selected=!0),"blackandwhite"===s&&this.fire("subviewViewEvent","search:blackandwhiteStyleSelected")):(this.selectedStyles.splice(l,1),t.removeClass("checked"),i&&(i.selected=!1)),this.updateSearchUrl()},updateSearchUrl:function(){this.isDefaultValue()?this.searchUrl.removeAPIParam(e.SearchHelper.API.styles):this.searchUrl.setAPIParam(e.SearchHelper.API.styles,this.selectedStyles.join(",")),this.fire("subviewViewEvent","search:urlUpdate",this.searchUrl)},isDefaultValue:function(){return!(this.selectedStyles&&this.selectedStyles.length)},clearSelectedStyle:function(e){var t=this.selectedStyles.indexOf(e);-1!==t&&(this.selectedStyles.splice(t,1),this.styles.some((function(t){if(t.value===e)return t.selected=0,!0}))),this.buildContainer(),this.updateSearchUrl()}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-style-picker","search-helper","search-url"],langBundles:["search"]});YUI.add("hermes-template-search-orientation-picker",(function(e,l){var n=e.Template.Handlebars.revive({1:function(e,l,n,a,t){var o,s,i=null!=l?l:e.nullContext||{},r=e.hooks.helperMissing,c="function",u=e.escapeExpression,p=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'\t\t<div class="orientation-button '+u(typeof(s=null!=(s=p(n,"cssClass")||(null!=l?p(l,"cssClass"):l))?s:r)===c?s.call(i,{name:"cssClass",hash:{},data:t,loc:{start:{line:4,column:33},end:{line:4,column:45}}}):s)+(null!=(o=p(n,"if").call(i,null!=l?p(l,"selected"):l,{name:"if",hash:{},fn:e.program(2,t,0),inverse:e.noop,data:t,loc:{start:{line:4,column:45},end:{line:4,column:76}}}))?o:"")+' tabbable" data-orientation-value="'+u(typeof(s=null!=(s=p(n,"value")||(null!=l?p(l,"value"):l))?s:r)===c?s.call(i,{name:"value",hash:{},data:t,loc:{start:{line:4,column:111},end:{line:4,column:120}}}):s)+'" data-tooltip-title="'+u((p(n,"intlMessage")||l&&p(l,"intlMessage")||r).call(i,{name:"intlMessage",hash:{intlName:null!=l?p(l,"intlKey"):l},data:t,loc:{start:{line:4,column:142},end:{line:4,column:174}}}))+'" data-tooltip-prefer-bottom="true" tabindex="0" aria-label="'+u(typeof(s=null!=(s=p(n,"value")||(null!=l?p(l,"value"):l))?s:r)===c?s.call(i,{name:"value",hash:{},data:t,loc:{start:{line:4,column:235},end:{line:4,column:244}}}):s)+'"></div>\n'},2:function(e,l,n,a,t){return" checked"},compiler:[8,">= 4.3.0"],main:function(e,l,n,a,t){var o,s=null!=l?l:e.nullContext||{},i=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'<p class="option-header tabbable" tabindex="0">'+e.escapeExpression((i(n,"intlMessage")||l&&i(l,"intlMessage")||e.hooks.helperMissing).call(s,{name:"intlMessage",hash:{intlName:"search.ORIENTATION"},data:t,loc:{start:{line:1,column:47},end:{line:1,column:92}}}))+'</p>\n<div class="orientation-list">\n'+(null!=(o=i(n,"each").call(s,null!=l?i(l,"orientations"):l,{name:"each",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t,loc:{start:{line:3,column:1},end:{line:5,column:10}}}))?o:"")+"</div>\n"},useData:!0}),a={};e.Array.each([],(function(l){var n=e.Template.get("hermes/"+l);n&&(a[l]=n)})),e.Template.register("hermes/search-orientation-picker",(function(l,t){return(t=t||{}).partials=t.partials?e.merge(a,t.partials):a,n(l,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-orientation-picker-view",(function(e){var t=[{intlKey:"search.LANDSCAPE",value:"landscape",cssClass:"landscape",selected:!0},{intlKey:"search.PORTRAIT",value:"portrait",cssClass:"portrait",selected:!0},{intlKey:"search.SQUARE",value:"square",cssClass:"square",selected:!0},{intlKey:"search.PANORAMA",value:"panorama",cssClass:"panorama",selected:!0}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(i){var a,s,n=this;return this.searchUrl=i.searchUrl||new e.SearchUrl({},this.appContext,e.SearchUrl.searchTypes.PHOTOS),a=this.searchUrl.getAPIParam(e.SearchHelper.API.orientation),this.selectedOrientations=[],this.orientations=[],t.forEach((function(t){s=e.merge(t),a&&(s.selected=-1!==a.indexOf(t.value)),s.selected&&n.selectedOrientations.push(s.value),n.orientations.push(s)})),this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("search-orientation-picker",{orientations:this.orientations}),this.updateContainerDisabledState(),this},activate:function(){return this.registerEventHandler(this.get("container").delegate("click",this.handleOrientationClick.bind(this),".orientation-button")),this.registerEventHandler(this.get("container").delegate("key",this.handleOrientationClick.bind(this),"down:13",".orientation-button")),this},handleOrientationClick:function(t){var i=t.target.getData("orientation-value"),a=this.selectedOrientations.indexOf(i);if(t.halt(),-1===a)this.selectedOrientations.push(i),t.target.addClass("checked"),this.updateContainerDisabledState();else{if(this.isContainerDisabled())return;this.selectedOrientations.splice(a,1),t.target.removeClass("checked"),this.updateContainerDisabledState()}this.isDefaultValue()?this.searchUrl.removeAPIParam(e.SearchHelper.API.orientation):this.searchUrl.setAPIParam(e.SearchHelper.API.orientation,this.selectedOrientations.join(",")),this.fire("subviewViewEvent","search:urlUpdate",this.searchUrl)},updateContainerDisabledState:function(){this.selectedOrientations.length<=1?this.get("container").addClass("disabled"):this.get("container").removeClass("disabled")},isContainerDisabled:function(){return!!this.get("container").hasClass("disabled")},isDefaultValue:function(){return this.selectedOrientations&&this.selectedOrientations.length===t.length}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-orientation-picker","search-helper","search-url"],langBundles:["search"]});YUI.add("hermes-template-search-min-size-picker",(function(e,l){var n=e.Template.Handlebars.revive({1:function(e,l,n,a,t){var i,o=null!=l?l:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,u=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'\t\t<li class="size-button'+(null!=(i=u(n,"if").call(o,null!=l?u(l,"isFirst"):l,{name:"if",hash:{},fn:e.program(2,t,0),inverse:e.noop,data:t,loc:{start:{line:4,column:24},end:{line:4,column:52}}}))?i:"")+(null!=(i=u(n,"if").call(o,null!=l?u(l,"isLast"):l,{name:"if",hash:{},fn:e.program(4,t,0),inverse:e.noop,data:t,loc:{start:{line:4,column:52},end:{line:4,column:78}}}))?i:"")+(null!=(i=u(n,"if").call(o,null!=l?u(l,"selected"):l,{name:"if",hash:{},fn:e.program(6,t,0),inverse:e.noop,data:t,loc:{start:{line:4,column:78},end:{line:4,column:110}}}))?i:"")+' tabbable"'+(null!=(i=u(n,"if").call(o,null!=l?u(l,"value"):l,{name:"if",hash:{},fn:e.program(8,t,0),inverse:e.noop,data:t,loc:{start:{line:4,column:120},end:{line:4,column:168}}}))?i:"")+' data-tooltip-title="'+r((u(n,"intlMessage")||l&&u(l,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:null!=l?u(l,"titleIntlKey"):l},data:t,loc:{start:{line:4,column:189},end:{line:4,column:226}}}))+(null!=(i=u(n,"if").call(o,null!=l?u(l,"value"):l,{name:"if",hash:{},fn:e.program(10,t,0),inverse:e.noop,data:t,loc:{start:{line:4,column:226},end:{line:4,column:258}}}))?i:"")+'" data-tooltip-prefer-bottom="true" tabindex="0" aria-label="'+r((u(n,"intlMessage")||l&&u(l,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:null!=l?u(l,"titleIntlKey"):l},data:t,loc:{start:{line:4,column:319},end:{line:4,column:356}}}))+(null!=(i=u(n,"if").call(o,null!=l?u(l,"value"):l,{name:"if",hash:{},fn:e.program(10,t,0),inverse:e.noop,data:t,loc:{start:{line:4,column:356},end:{line:4,column:388}}}))?i:"")+'"><span aria-hidden="true">'+r((u(n,"intlMessage")||l&&u(l,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:null!=l?u(l,"intlKey"):l},data:t,loc:{start:{line:4,column:415},end:{line:4,column:447}}}))+"<span></li>\n"},2:function(e,l,n,a,t){return" first"},4:function(e,l,n,a,t){return" last"},6:function(e,l,n,a,t){return" selected"},8:function(e,l,n,a,t){var i,o=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return' data-size-value="'+e.escapeExpression("function"==typeof(i=null!=(i=o(n,"value")||(null!=l?o(l,"value"):l))?i:e.hooks.helperMissing)?i.call(null!=l?l:e.nullContext||{},{name:"value",hash:{},data:t,loc:{start:{line:4,column:151},end:{line:4,column:160}}}):i)+'"'},10:function(e,l,n,a,t){var i,o=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return" ("+e.escapeExpression("function"==typeof(i=null!=(i=o(n,"value")||(null!=l?o(l,"value"):l))?i:e.hooks.helperMissing)?i.call(null!=l?l:e.nullContext||{},{name:"value",hash:{},data:t,loc:{start:{line:4,column:241},end:{line:4,column:250}}}):i)+")"},compiler:[8,">= 4.3.0"],main:function(e,l,n,a,t){var i,o=null!=l?l:e.nullContext||{},s=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'<p class="option-header tabbable" tabindex="0">'+e.escapeExpression((s(n,"intlMessage")||l&&s(l,"intlMessage")||e.hooks.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"search.MINIMUM_SIZE"},data:t,loc:{start:{line:1,column:47},end:{line:1,column:93}}}))+'</p>\n<ul class="size-list">\n'+(null!=(i=s(n,"each").call(o,null!=l?s(l,"sizes"):l,{name:"each",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t,loc:{start:{line:3,column:1},end:{line:5,column:10}}}))?i:"")+"</ul>\n"},useData:!0}),a={};e.Array.each([],(function(l){var n=e.Template.get("hermes/"+l);n&&(a[l]=n)})),e.Template.register("hermes/search-min-size-picker",(function(l,t){return(t=t||{}).partials=t.partials?e.merge(a,t.partials):a,n(l,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-min-size-picker-view",(function(e){var t=[{intlKey:"search.SMALL_SHORT",titleIntlKey:"search.SMALL_SHOW_ALL_SIZES",selected:!0},{intlKey:"search.MEDIUM_SHORT",titleIntlKey:"search.MEDIUM",value:"640"},{intlKey:"search.LARGE_SHORT",titleIntlKey:"search.LARGE",value:"1024"}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(i){var s,r,a,h,l=this;return this.searchUrl=i.searchUrl||new e.SearchUrl({},this.appContext,e.SearchUrl.searchTypes.PHOTOS),s=this.searchUrl.getAPIParam(e.SearchHelper.API.dimensionSearchMode),r=this.searchUrl.getAPIParam(e.SearchHelper.API.height),a=this.searchUrl.getAPIParam(e.SearchHelper.API.width),this.sizes=[],t.forEach((function(t){h=e.merge(t),s&&r&&a&&(h.selected=t.value&&r===t.value&&a===t.value&&"min"===s),h.selected&&l.set("selectedSize",h.value),l.sizes.push(h)})),this.sizes[0].isFirst=!0,this.sizes[this.sizes.length-1].isLast=!0,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("search-min-size-picker",{sizes:this.sizes}),this},activate:function(){return this.registerEventHandler(this.get("container").delegate("click",this.handleSizeClick.bind(this),".size-button")),this.registerEventHandler(this.get("container").delegate("key",this.handleSizeClick.bind(this),"down:13",".size-button")),this},handleSizeClick:function(t){var i=t.currentTarget.getData("size-value");t.halt(),this.get("selectedSize")!==i&&(this.set("selectedSize",i),this.get("container").one(".size-button.selected").removeClass("selected"),t.currentTarget.addClass("selected"),!this.get("selectedSize")||this.isDefaultValue()?(this.searchUrl.removeAPIParam(e.SearchHelper.API.dimensionSearchMode),this.searchUrl.removeAPIParam(e.SearchHelper.API.height),this.searchUrl.removeAPIParam(e.SearchHelper.API.width)):(this.searchUrl.setAPIParam(e.SearchHelper.API.dimensionSearchMode,"min"),this.searchUrl.setAPIParam(e.SearchHelper.API.height,this.get("selectedSize")),this.searchUrl.setAPIParam(e.SearchHelper.API.width,this.get("selectedSize"))),this.fire("subviewViewEvent","search:urlUpdate",this.searchUrl))},isDefaultValue:function(){return!this.get("selectedSize")}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-min-size-picker","search-helper","search-url"],langBundles:["search"]});